---
import X from "@hero/assets/X.astro"
---

<dialog id="waitlist_modal" class="modal text-text-dark text-base z-[1000]">
  <div class="modal-box w-[90%] max-w-md p-8 bg-neutral-light rounded-2xl shadow-lg relative text-base">
    <button
      type="button"
      class="cursor-pointer absolute top-5 right-5 transition-transform duration-200 hover:scale-110"
      onclick="document.getElementById('waitlist_modal').close()"
    >
      <X class="size-8" />
    </button>

    <h3 class="text-xl lg:text-2xl font-bold text-center mt-5">
      ¡Únete a la Lista de Espera de FiveBrains!
    </h3>
    <p class="py-4 text-center text-sm lg:text-base">
      Sé de los primeros en experimentar una nueva forma de productividad.
      Te avisaremos cuando estemos listos.
    </p>

    <form method="dialog" class="space-y-4 mt-2" id="waitlist-form">
      <div>
        <label for="name" class="block font-medium mb-1">Nombre:</label>
        <input
          type="text"
          id="name"
          name="name"
          placeholder="Tu nombre"
          class="input input-bordered w-full p-2 rounded-md bg-white border border-gray-300 focus:outline-none focus:ring-2 focus:ring-color-primary-blue"
        />
        <p id="name-error" class="text-red-600 text-sm mt-1 hidden">
          No se pueden enviar campos vacíos.
        </p>
      </div>

      <div>
        <label for="email" class="block font-medium mb-1">Correo Electrónico:</label>
        <input
          type="email"
          id="email"
          name="email"
          placeholder="tu.correo@ejemplo.com"
          class="input input-bordered w-full p-2 rounded-md bg-white border border-gray-300 focus:outline-none focus:ring-2 focus:ring-color-primary-blue"
        />
        <p id="email-error" class="text-red-600 text-sm mt-1 hidden">
          No se pueden enviar campos vacíos.
        </p>
      </div>

      <div class="modal-action flex flex-col sm:flex-row justify-center gap-2 mt-6">
        <button
          type="submit"
          class="cursor-pointer bg-neutral-light hover:bg-text-dark focus:bg-text-dark text-text-dark hover:text-white focus:text-white border-2 border-solid border-text-dark font-medium p-4 rounded-2xl transition-all duration-200"
        >
          ¡Unirme a la Lista!
        </button>
      </div>
    </form>
  </div>
</dialog>

<script is:inline>
  (() => {
    const form = document.getElementById('waitlist-form')
    const nameInput = document.getElementById('name')
    const emailInput = document.getElementById('email')
    const nameError = document.getElementById('name-error')
    const emailError = document.getElementById('email-error')

    form?.addEventListener('submit', (e) => {
      let valid = true

      if (!nameInput.value.trim()) {
        nameError.classList.remove('hidden')
        valid = false
      } else {
        nameError.classList.add('hidden')
      }

      if (!emailInput.value.trim()) {
        emailError.classList.remove('hidden')
        valid = false
      } else {
        emailError.classList.add('hidden')
      }

      if (!valid) {
        e.preventDefault()
      }
    })
  })()
</script>
